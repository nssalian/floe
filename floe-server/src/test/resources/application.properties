#
# Copyright 2026 The Floe Authors
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# Test configuration for Floe Server (unit tests)

# Use in-memory store for unit tests (no DB needed)
floe.store.type=MEMORY

# Disable DevServices and Flyway for unit tests
quarkus.datasource.devservices.enabled=false
quarkus.flyway.migrate-at-start=false
quarkus.datasource.active=false

# Engine and catalog config
floe.engine-type=TRINO
floe.catalog.type=REST
floe.catalog.uri=http://localhost:8181

# Disable auth for testing
floe.auth.enabled=false

# Use random port
quarkus.http.test-port=0

# Logging - suppress noise during tests
quarkus.log.level=ERROR
quarkus.log.category."com.floe".level=OFF
quarkus.log.category."io.quarkus".level=ERROR
quarkus.log.category."io.agroal".level=OFF
quarkus.log.category."org.jboss".level=ERROR
quarkus.log.category."io.smallrye".level=ERROR
quarkus.log.category."org.hibernate".level=ERROR
quarkus.log.category."io.quarkus.resteasy.common".level=ERROR
quarkus.log.category."com.floe.server".level=OFF

# Ensure all required floe config properties are set for tests
floe.livy.url=http://localhost:8998
floe.livy.job.jar=local:///opt/floe/floe-maintenance-job.jar
floe.livy.job.main-class=com.floe.spark.job.MaintenanceJob
floe.trino.jdbc-url=jdbc:trino://localhost:8080
floe.catalog.warehouse=s3://warehouse/
